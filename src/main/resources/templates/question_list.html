<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security/" xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}">
<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">

<head>
    <meta charset="UTF-8">
    <title>Question List</title>
</head>

<body>
<!--내비게이션 탭-->
<nav th:fragment="navbarFragment" class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <div class="container-fluid">
        <a class="navbar-brand" href="/question/list"> Home </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/member/login}" sec:authorize="isAnonymous()"> 로그인 </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/member/logout}" sec:authorize="isAuthenticated()"> 로그아웃 </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/member/signup}"> 회원가입 </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- 페이지 구역 -->
    <div layout:fragment="content" class="container my-3">
        <table class="table">
            <p>
                <a th:href="@{/question/write}" class="btn btn-primary"> 질문 등록하기 </a>
                <input type="text"><input type="button" value="찾기">
            </p>
            <!--질문 목록 : 컬럼명-->
            <thead class="table-dark">
                <tr class="text-center">
                    <th> 번호 </th>
                    <th style="width:50%"> 제목  </th>
                    <th> 글쓴이 </th>
                    <th> 작성일자 </th>
                </tr>
            </thead>
            <!--질문 목록 : 데이터 행-->
            <tbody>
                <tr class="text-center" th:each="question, idx : ${questionList}">

                    <td th:text="${question.idx}"></td>
                    <td><a th:href="@{/question/detail/{idx}(idx=${question.idx})}" th:text="${question.title}"></a></td>
                    <td>
                        <span th:if="${question.user_id != null}" th:text="${question.user_id.username}"></span>
                    </td>
                    <td th:text="${#temporals.format(question.date, 'yyyy-MM-dd HH:mm')}"></td>
                </tr>
            </tbody>

        </table>
    </div>
</body>
</html>